<script type="text/discourse-plugin" version="0.8">
    if (window.ReactNativeWebView) {
      Ember.run.later(() => {
        let headerBg = $(".d-header").css( "background-color" );
        let buttonColor = $(".d-header svg.d-icon").css( "color" );
        window.ReactNativeWebView.postMessage(
          JSON.stringify({ headerBg: headerBg, buttonColor: buttonColor })
        );
      }, 500);

      const container = Discourse.__container__;

			const router = container.lookup("router:main");
      router.on("routeDidChange", () => {
        window.ReactNativeWebView.postMessage(JSON.stringify({ currentUrl: window.location.origin + router.url }));
      });
    }
</script>